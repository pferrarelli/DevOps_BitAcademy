import{a as J,b as K}from"./chunk-L3D3Z3Z7.js";import{a as x,b as d,d as w,e as A,f as G,h as p,i as V,j as P,k as q,l as j,m as B,p as U,q as L,r as $,s as H}from"./chunk-2ASXKKEH.js";import{a as h}from"./chunk-SEY23RSP.js";import{a as S}from"./chunk-6GA4IGI7.js";import{D as _,H as D,I as z,a as v}from"./chunk-I25GFFKI.js";import"./chunk-AOGXNLA7.js";import{Ca as g,Ia as o,Ja as C,K as E,La as M,Ma as T,_a as R,bb as y,ca as s,da as c,ga as N,ka as F,kb as O,ma as l,ra as k,wa as t,xa as e,ya as u}from"./chunk-KLZVGRBR.js";var f=function(i){return i[i.CREATO=0]="CREATO",i[i.IN_PROGRESS=1]="IN_PROGRESS",i[i.FINITO=2]="FINITO",i}(f||{});function Q(i,a){if(i&1&&(t(0,"mat-option",8),o(1),e()),i&2){let I=a.$implicit;l("value",I.id_dipendente),s(1),C(I.nome+" "+I.cognome)}}var Ie=(()=>{let a=class a{constructor(r,m,n,b){this.taskService=r,this.dipendenteService=m,this.router=n,this.destroyRef=b,this.dipendenti=new Array,this.stato=f,this.form=new G({titolo:new p("",{nonNullable:!0,validators:[d.required]}),descrizione:new p("",{nonNullable:!0,validators:[d.required]}),dataFine:new p("",{nonNullable:!0,validators:[d.required]}),id_dipendente:new p("",{nonNullable:!0,validators:[d.required]}),dataInizio:new p("",{nonNullable:!0,validators:[d.required]}),stato:new p(f.CREATO,{nonNullable:!0,validators:[d.required]})})}ngOnInit(){this.taskService.getTasks().pipe(v(this.destroyRef)).subscribe({next:r=>{this.id&&(this.task=r.filter(m=>m.id_task===this.id).at(0),this.form.controls.titolo.setValue(this.task?.titolo??""),this.form.controls.descrizione.setValue(this.task?.descrizione??""),this.form.controls.dataFine.setValue(this.task?.dataFine??""),this.form.controls.dataInizio?.setValue(this.task?.dataInizio??""),this.form.controls.stato?.setValue(this.task?.stato??f.CREATO),this.form.controls.id_dipendente.setValue(this.task?.dipendente.nome+" "+this.task?.dipendente.cognome))}}),this.dipendenteService.getDipendenti().pipe(v(this.destroyRef)).subscribe({next:r=>this.dipendenti=r,error:r=>console.log(r)})}back(){this.router.navigateByUrl("tasks")}modifica(){this.taskService.updateTaskParams(this.form.controls.titolo.value??"",this.form.controls.descrizione.value,this.form.controls.stato?.value??f.CREATO,this.form.controls.dataInizio?.value??"",this.form.controls.dataFine.value,Number.parseInt(this.form.controls.id_dipendente.value),this.id).pipe(v(this.destroyRef)).subscribe({complete:()=>this.back()})}};a.\u0275fac=function(m){return new(m||a)(c(S),c(h),c(O),c(N))},a.\u0275cmp=E({type:a,selectors:[["app-modifica-task"]],inputs:{id:["id","id",r=>Number.parseInt(r)]},standalone:!0,features:[M([S,h]),F,T],decls:37,vars:6,consts:[[2,"margin-top","5%",3,"formGroup","ngSubmit"],["matInput","","formControlName","titolo"],["matInput","","formControlName","descrizione"],["formControlName","id_dipendente"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","dataInizio"],["matInput","","formControlName","dataFine"],["formControlName","stato"],[3,"value"],["mat-stroked-button","","type","submit","color","primary",3,"disabled"]],template:function(m,n){m&1&&(t(0,"form",0),g("ngSubmit",function(){return n.modifica()}),t(1,"h1"),o(2,"Modifica Task"),e(),t(3,"mat-form-field")(4,"mat-label"),o(5,"Titolo"),e(),u(6,"input",1),e(),t(7,"mat-form-field")(8,"mat-label"),o(9,"Descrizione"),e(),u(10,"input",2),e(),t(11,"mat-form-field")(12,"mat-label"),o(13,"Dipendente"),e(),t(14,"mat-select",3),k(15,Q,2,2,"mat-option",4),e()(),t(16,"mat-form-field")(17,"mat-label"),o(18,"Data inizio"),e(),u(19,"input",5),e(),t(20,"mat-form-field")(21,"mat-label"),o(22,"Data fine"),e(),u(23,"input",6),e(),t(24,"mat-form-field")(25,"mat-label"),o(26,"Stato"),e(),t(27,"mat-select",7)(28,"mat-option",8),o(29,"CREATO"),e(),t(30,"mat-option",8),o(31,"IN PROGRESS"),e(),t(32,"mat-option",8),o(33,"FINITO"),e()()(),u(34,"hr"),t(35,"button",9),o(36,"Modifica"),e()()),m&2&&(l("formGroup",n.form),s(15),l("ngForOf",n.dipendenti),s(13),l("value",n.stato.CREATO),s(2),l("value",n.stato.IN_PROGRESS),s(2),l("value",n.stato.FINITO),s(3),l("disabled",!n.form.valid))},dependencies:[y,R,j,V,x,w,A,P,q,H,$,U,B,L,z,D,K,J,_],styles:["mat-form-field[_ngcontent-%COMP%]{margin-right:3%}"]});let i=a;return i})();export{Ie as ModificaTaskComponent};
